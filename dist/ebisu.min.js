var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var c,g=[];!(c=a.next()).done;)g.push(c.value);return g};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},c=Object.create(new $jscomp.global.Proxy(a,{get:function(g,e,l){return g==a&&"q"==e&&l==c}}));return!0===c.q}catch(g){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,g){a!=Array.prototype&&a!=Object.prototype&&(a[c]=g.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,c){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(g){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(g||"")+"_"+c++,g)}var c=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};
$jscomp.polyfill=function(a,c,g,e){if(c){g=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var l=a[e];l in g||(g[l]={});g=g[l]}a=a[a.length-1];e=g[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("WeakMap",function(a){function c(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),h=Object.seal({}),f=new a([[b,2],[h,3]]);if(2!=f.get(b)||3!=f.get(h))return!1;f.delete(b);f.set(h,4);return!f.has(b)&&4==f.get(h)}catch(t){return!1}}function g(){}function e(b){var a=typeof b;return"object"===a&&null!==b||"function"===a}function l(b){if(!$jscomp.owns(b,k)){var a=new g;$jscomp.defineProperty(b,k,{value:a})}}function d(b){var a=Object[b];a&&(Object[b]=function(b){if(b instanceof
g)return b;l(b);return a(b)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;var k="$jscomp_hidden_"+Math.random();d("freeze");d("preventExtensions");d("seal");var m=0,b=function(b){this.id_=(m+=Math.random()+1).toString();if(b){b=$jscomp.makeIterator(b);for(var a;!(a=b.next()).done;)a=a.value,this.set(a[0],a[1])}};b.prototype.set=function(b,a){if(!e(b))throw Error("Invalid WeakMap key");l(b);if(!$jscomp.owns(b,k))throw Error("WeakMap key fail: "+
b);b[k][this.id_]=a;return this};b.prototype.get=function(b){return e(b)&&$jscomp.owns(b,k)?b[k][this.id_]:void 0};b.prototype.has=function(b){return e(b)&&$jscomp.owns(b,k)&&$jscomp.owns(b[k],this.id_)};b.prototype.delete=function(b){return e(b)&&$jscomp.owns(b,k)&&$jscomp.owns(b[k],this.id_)?delete b[k][this.id_]:!1};return b},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=d.get(b)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var h=d.entries(),f=h.next();if(f.done||f.value[0]!=b||"s"!=f.value[1])return!1;f=h.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!h.next().done?!1:!0}catch(t){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbolIterator();var g=new WeakMap,e=function(b){this.data_={};this.head_=k();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var a;!(a=b.next()).done;)a=a.value,this.set(a[0],a[1])}};e.prototype.set=function(b,a){b=0===b?0:b;var h=l(this,b);h.list||(h.list=this.data_[h.id]=[]);h.entry?h.entry.value=a:(h.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,
value:a},h.list.push(h.entry),this.head_.previous.next=h.entry,this.head_.previous=h.entry,this.size++);return this};e.prototype.delete=function(b){b=l(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=k();this.size=0};e.prototype.has=function(b){return!!l(this,b).entry};
e.prototype.get=function(b){return(b=l(this,b).entry)&&b.value};e.prototype.entries=function(){return d(this,function(b){return[b.key,b.value]})};e.prototype.keys=function(){return d(this,function(b){return b.key})};e.prototype.values=function(){return d(this,function(b){return b.value})};e.prototype.forEach=function(b,a){for(var h=this.entries(),d;!(d=h.next()).done;)d=d.value,b.call(a,d[1],d[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var l=function(b,a){var h=a&&typeof a;"object"==
h||"function"==h?g.has(a)?h=g.get(a):(h=""+ ++m,g.set(a,h)):h="p_"+a;var d=b.data_[h];if(d&&$jscomp.owns(b.data_,h))for(b=0;b<d.length;b++){var e=d[b];if(a!==a&&e.key!==e.key||a===e.key)return{id:h,list:d,index:b,entry:e}}return{id:h,list:d,index:-1,entry:void 0}},d=function(b,a){var d=b.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=b.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:a(d)};d=null}return{done:!0,value:void 0}})},k=function(){var b={};return b.previous=
b.next=b.head=b},m=0;return e},"es6","es3");$jscomp.polyfill("Math.sign",function(a){return a?a:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}},"es6","es3");
(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).ebisu=a()})(function(){return function(){function a(c,g,e){function l(m,b){if(!g[m]){if(!c[m]){var k="function"==typeof require&&require;if(!b&&k)return k(m,!0);if(d)return d(m,!0);b=Error("Cannot find module '"+m+"'");throw b.code="MODULE_NOT_FOUND",b;}b=
g[m]={exports:{}};c[m][0].call(b.exports,function(b){return l(c[m][1][b]||b)},b,b.exports,a,c,g,e)}return g[m].exports}for(var d="function"==typeof require&&require,k=0;k<e.length;k++)l(e[k]);return l}return a}()({1:[function(a,c,g){function e(b){var a=x.get(b);if(a)return a;a=f(b);x.set(b,a);return a}function l(b,a,d){return f(b)-f(b+d)+e(a+d)-e(a)}function d(b,a){return e(b)+e(a)-e(b+a)}function k(a,e,h,k,c){k=void 0===k?!0:k;var f=$jscomp.makeIterator(a),n=f.next().value,g=f.next().value,q=f.next().value;
c=c||q;f=h/q;var r=h/c;if(e){if(c===q)return c=[n+f,g,q],k?m(a,e,h,c):c;var u=l(n+f/r*(1+r),n+f,g);n=l(n+f/r*(2+r),n+f,g);q=v(u);n=b(n,2*u)}else{q=d(n,g);u=d(n+f,g);u=t([q,u],[1,-1])[0];q=b(d(n+f/r,g)-u,d(n+f/r*(r+1),g)-u);n=b(d(n+2*f/r,g)-u,d(n+f/r*(r+2),g)-u);if(0>=n)throw Error("invalid second moment found");n-=Math.pow(q,2)}if(0>=q)throw Error("invalid mean found");if(0>=n)throw Error("invalid variance found");g=$jscomp.makeIterator(p(q,n));n=g.next().value;g=g.next().value;c=[n,g,c];return k?
m(a,e,h,c):c}function m(b,a,d,e){var f=$jscomp.makeIterator(e),c=f.next().value,m=f.next().value;f.next();return c>2*m||m>2*c?(e=h(e,.5,!0),k(b,a,d,!1,e)):e}function b(b,a){var d=Math.max(b,a);return v(d)*(v(b-d)-v(a-d))}function p(b,a){a=b*(1-b)/a-1;return[b*a,(1-b)*a]}function h(b,e,f,h){function c(b){return d(m+v(b),k)-g-l}e=void 0===e?.5:e;f=void 0===f?!1:f;h=void 0===h?1E-4:h;if(0>e||1<e)throw Error("percentiles must be between (0, 1) exclusive");b=$jscomp.makeIterator(b);var m=b.next().value,
k=b.next().value;b=b.next().value;var g=d(m,k),l=w(e),n=f?1:6;e=-n/2;for(var t=n/2,p=c(e),q=c(t);0<p&&0<q;)e=t,p=q,t+=n,q=c(t);for(;0>p&&0>q;)t=e,q=p,e-=n,p=c(e);if(!(0<p&&0>q))throw Error("failed to bracket");if(f)return(v(e)+v(t))/2*b;f={};h=a("minimize-golden-section-1d")(function(b){return Math.abs(c(b))},{lowerBound:e,upperBound:t,tolerance:h},f);if(!f.converged)throw Error("failed to converge");return v(h)*b}var f=a("gamma").log,t=a("./logsumexp"),v=Math.exp,w=Math.log,x=new Map;c.exports={updateRecall:k,
predictRecall:function(b,a,d){d=void 0===d?!1:d;var e=$jscomp.makeIterator(b);b=e.next().value;var f=e.next().value;e=e.next().value;a=l(b+a/e,b,f);return d?v(a):a},defaultModel:function(b,a,d){a=void 0===a?4:a;return[a,void 0===d?a:d,b]},modelToPercentileDecay:h}},{"./logsumexp":2,gamma:3,"minimize-golden-section-1d":4}],2:[function(a,c,g){var e=Math.exp,l=Math.log,d=Math.sign,k=Math.max;c.exports=function(a,b){for(var c=k.apply(null,$jscomp.arrayFromIterable(a)),h=0,f=a.length-1;0<=f;f--)h+=b[f]*
e(a[f]-c);a=d(h);return[l(h*a)+c,a]}},{}],3:[function(a,c,g){function e(a){if(0>a)return Number("0/0");for(var e=d[0],b=d.length-1;0<b;--b)e+=d[b]/(a+b);b=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(b)-b+Math.log(e)-Math.log(a)}var l=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],d=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,
-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];c.exports=function b(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*b(1-a));if(100<a)return Math.exp(e(a));--a;for(var d=l[0],c=1;9>c;c++)d+=l[c]/(a+c);c=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(c,a+.5)*Math.exp(-c)*d};c.exports.log=e},{}],4:[function(a,c,g){var e=
a("./src/golden-section-minimize"),l=a("./src/bracket-minimum"),d=[0,0];c.exports=function(a,c,b){c=c||{};var k=void 0===c.tolerance?1E-8:c.tolerance,h=void 0===c.initialIncrement?1:c.initialIncrement,f=void 0===c.lowerBound?-Infinity:c.lowerBound,g=void 0===c.upperBound?Infinity:c.upperBound,m=void 0===c.maxIterations?100:c.maxIterations;b&&(b.iterations=0,b.argmin=NaN,b.minimum=Infinity,b.converged=!1);if(isFinite(g)&&isFinite(f))d[0]=f,d[1]=g;else if(c=void 0===c.guess?-Infinity<f?Infinity>g?.5*
(f+g):f:Infinity>g?g:0:c.guess,l(d,a,c,h,f,g,m),isNaN(d[0])||isNaN(d[1]))return NaN;return e(a,d[0],d[1],k,m,b)}},{"./src/bracket-minimum":5,"./src/golden-section-minimize":6}],5:[function(a,c,g){c.exports=function(a,c,d,g,m,b,p){var e,f,k;p=1;var l=k=d;for(f=e=d=c(d);!w&&isFinite(g)&&!isNaN(g);){++p;var w=!0;e<=f&&(f=e,k=Math.max(m,k-g),e=c(k),w=!1);d<=f&&(f=d,l=Math.min(b,l+g),d=c(l),w=!1);f=Math.min(f,e,d);if(e===f&&k===m||d===f&&l===b)w=!0;g*=4>p?2:Math.exp(.5*p);if(!isFinite(g))return a[0]=-Infinity,
a[1]=Infinity,a}a[0]=k;a[1]=l;return a}},{}],6:[function(a,c,g){var e=2/(1+Math.sqrt(5));c.exports=function(a,d,c,g,b,p){for(var h=0,f=c-e*(c-d),k=d+e*(c-d),l=a(f),m=a(k),x=a(d),q=a(c),n=d,r=c;++h<b&&Math.abs(c-d)>g;)m>l?(c=k,k=f,m=l,f=c-e*(c-d),l=a(f)):(d=f,f=k,l=m,k=d+e*(c-d),m=a(k));a=.5*(c+d);d=.5*(l+m);p&&(p.iterations=h,p.argmin=a,p.minimum=d,p.converged=!0);return isNaN(m)||isNaN(l)||h===b?(p&&(p.converged=!1),NaN):x<d?n:q<d?r:a}},{}]},{},[1])(1)});
