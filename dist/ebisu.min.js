var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,c){a!=Array.prototype&&a!=Object.prototype&&(a[f]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var f=0;return $jscomp.iteratorPrototype(function(){return f<a.length?{done:!1,value:a[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=a[Symbol.iterator];return f?f.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var f,c=[];!(f=a.next()).done;)c.push(f.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},f=Object.create(new $jscomp.global.Proxy(a,{get:function(c,g,k){return c==a&&"q"==g&&k==f}}));return!0===f.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};
$jscomp.polyfill=function(a,f,c,g){if(f){c=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var k=a[g];k in c||(c[k]={});c=c[k]}a=a[a.length-1];g=c[a];f=f(g);f!=g&&null!=f&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("WeakMap",function(a){function f(){if(!a||!Object.seal)return!1;try{var m=Object.seal({}),b=Object.seal({}),e=new a([[m,2],[b,3]]);if(2!=e.get(m)||3!=e.get(b))return!1;e.delete(m);e.set(b,4);return!e.has(m)&&4==e.get(b)}catch(n){return!1}}function c(a){$jscomp.owns(a,k)||$jscomp.defineProperty(a,k,{value:{}})}function g(a){var b=Object[a];b&&(Object[a]=function(a){c(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(f())return a;
var k="$jscomp_hidden_"+Math.random();g("freeze");g("preventExtensions");g("seal");var l=0,h=function(a){this.id_=(l+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};h.prototype.set=function(a,b){c(a);if(!$jscomp.owns(a,k))throw Error("WeakMap key fail: "+a);a[k][this.id_]=b;return this};h.prototype.get=function(a){return $jscomp.owns(a,k)?a[k][this.id_]:void 0};h.prototype.has=
function(a){return $jscomp.owns(a,k)&&$jscomp.owns(a[k],this.id_)};h.prototype.delete=function(a){return $jscomp.owns(a,k)&&$jscomp.owns(a[k],this.id_)?delete a[k][this.id_]:!1};return h},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function f(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),e=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=e.get(b)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var n=e.entries(),d=n.next();if(d.done||d.value[0]!=b||"s"!=d.value[1])return!1;d=n.next();return d.done||4!=d.value[0].x||"t"!=d.value[1]||!n.next().done?!1:!0}catch(u){return!1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&
$jscomp.ES6_CONFORMANCE)return a}else if(f())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var c=new WeakMap,g=function(b){this.data_={};this.head_=h();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var a;!(a=b.next()).done;)a=a.value,this.set(a[0],a[1])}};g.prototype.set=function(a,e){var b=k(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=e:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:e},b.list.push(b.entry),this.head_.previous.next=
b.entry,this.head_.previous=b.entry,this.size++);return this};g.prototype.delete=function(b){b=k(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};g.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=h();this.size=0};g.prototype.has=function(b){return!!k(this,b).entry};g.prototype.get=function(b){return(b=k(this,b).entry)&&
b.value};g.prototype.entries=function(){return l(this,function(b){return[b.key,b.value]})};g.prototype.keys=function(){return l(this,function(b){return b.key})};g.prototype.values=function(){return l(this,function(b){return b.value})};g.prototype.forEach=function(b,a){for(var e=this.entries(),d;!(d=e.next()).done;)d=d.value,b.call(a,d[1],d[0],this)};g.prototype[Symbol.iterator]=g.prototype.entries;var k=function(a,e){var b=e&&typeof e;"object"==b||"function"==b?c.has(e)?b=c.get(e):(b=""+ ++m,c.set(e,
b)):b="p_"+e;var d=a.data_[b];if(d&&$jscomp.owns(a.data_,b))for(a=0;a<d.length;a++){var g=d[a];if(e!==e&&g.key!==g.key||e===g.key)return{id:b,list:d,index:a,entry:g}}return{id:b,list:d,index:-1,entry:void 0}},l=function(a,e){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:e(b)};b=null}return{done:!0,value:void 0}})},h=function(){var a={};return a.previous=a.next=a.head=a},m=0;return g},"es6","es3");
$jscomp.polyfill("Math.sign",function(a){return a?a:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}},"es6","es3");
(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).ebisu=a()})(function(){return function(){function a(f,c,g){function k(m,b){if(!c[m]){if(!f[m]){var e="function"==typeof require&&require;if(!b&&e)return e(m,!0);if(l)return l(m,!0);b=Error("Cannot find module '"+m+"'");throw b.code="MODULE_NOT_FOUND",b;}b=
c[m]={exports:{}};f[m][0].call(b.exports,function(a){return k(f[m][1][a]||a)},b,b.exports,a,f,c,g)}return c[m].exports}for(var l="function"==typeof require&&require,h=0;h<g.length;h++)k(g[h]);return k}return a}()({1:[function(a,f,c){function g(a){var b=x.get(a);if(b)return b;b=d(a);x.set(a,b);return b}function k(a,b,e){return d(a)-d(a+e)+g(b+e)-g(b)}function l(a,b){return g(a)+g(b)-g(a+b)}function h(a,g,d,f,h){f=void 0===f?!0:f;var p=$jscomp.makeIterator(a),c=p.next().value,n=p.next().value,q=p.next().value;
h=h||q;p=d/q;var t=d/h;if(g){if(h===q)return h=[c+p,n,q],f?m(a,g,d,h):h;var v=k(c+p/t*(1+t),c+p,n);c=k(c+p/t*(2+t),c+p,n);q=w(v);c=b(c,2*v)}else{q=l(c,n);v=l(c+p,n);v=u([q,v],[1,-1])[0];q=b(l(c+p/t,n)-v,l(c+p/t*(t+1),n)-v);c=b(l(c+2*p/t,n)-v,l(c+p/t*(t+2),n)-v);if(0>=c)throw Error("invalid second moment found");c-=Math.pow(q,2)}if(0>=q)throw Error("invalid mean found");if(0>=c)throw Error("invalid variance found");n=$jscomp.makeIterator(e(q,c));c=n.next().value;n=n.next().value;h=[c,n,h];return f?
m(a,g,d,h):h}function m(a,b,e,d){var g=$jscomp.makeIterator(d),c=g.next().value,m=g.next().value;g.next();return c>2*m||m>2*c?(d=n(d,.5,!0),h(a,b,e,!1,d)):d}function b(a,b){var d=Math.max(a,b);return w(d)*(w(a-d)-w(b-d))}function e(a,b){b=a*(1-a)/b-1;return[a*b,(1-a)*b]}function n(b,d,e,g){function c(a){return l(m+w(a),h)-f-k}d=void 0===d?.5:d;e=void 0===e?!1:e;g=void 0===g?.0001:g;if(0>d||1<d)throw Error("percentiles must be between (0, 1) exclusive");b=$jscomp.makeIterator(b);var m=b.next().value,
h=b.next().value;b=b.next().value;var f=l(m,h),k=r(d),n=e?1:6;d=-n/2;for(var p=n/2,u=c(d),q=c(p);0<u&&0<q;)d=p,u=q,p+=n,q=c(p);for(;0>u&&0>q;)p=d,q=u,d-=n,u=c(d);if(!(0<u&&0>q))throw Error("failed to bracket");if(e)return(w(d)+w(p))/2*b;e={};g=a("minimize-golden-section-1d")(function(a){return Math.abs(c(a))},{lowerBound:d,upperBound:p,tolerance:g},e);if(!e.converged)throw error("failed to converge");return w(g)}var d=a("gamma").log,u=a("./logsumexp"),w=Math.exp,r=Math.log,x=new Map;f.exports={updateRecall:h,
predictRecall:function(a,b,d){d=void 0===d?!1:d;var e=$jscomp.makeIterator(a);a=e.next().value;var g=e.next().value;e=e.next().value;b=k(a+b/e,a,g);return d?w(b):b},defaultModel:function(a,b,d){b=void 0===b?4:b;return[b,void 0===d?b:d,a]},modelToPercentileDecay:n}},{"./logsumexp":2,gamma:3,"minimize-golden-section-1d":4}],2:[function(a,f,c){var g=Math.exp,k=Math.log,l=Math.sign,h=Math.max;f.exports=function(a,b){for(var e=h.apply(null,[].concat($jscomp.arrayFromIterable(a))),c=0,d=a.length-1;0<=d;d--)c+=
b[d]*g(a[d]-e);a=l(c);return[k(c*a)+e,a]}},{}],3:[function(a,f,c){function g(a){if(0>a)return Number("0/0");for(var b=h[0],e=h.length-1;0<e;--e)b+=h[e]/(a+e);e=a+l+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(e)-e+Math.log(b)-Math.log(a)}var k=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,.000009984369578019572,1.5056327351493116e-7],l=607/128,h=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,
-.4919138160976202,.00003399464998481189,.00004652362892704858,-.00009837447530487956,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,.00008441822398385275,-.000026190838401581408,.0000036899182659531625];f.exports=function e(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*e(1-a));if(100<a)return Math.exp(g(a));--a;for(var b=k[0],d=1;9>d;d++)b+=k[d]/(a+d);d=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(d,a+.5)*Math.exp(-d)*b};f.exports.log=g},{}],4:[function(a,
f,c){var g=a("./src/golden-section-minimize"),k=a("./src/bracket-minimum"),l=[0,0];f.exports=function(a,c,b){c=c||{};var e=void 0===c.tolerance?1e-8:c.tolerance,h=void 0===c.initialIncrement?1:c.initialIncrement,d=void 0===c.lowerBound?-Infinity:c.lowerBound,f=void 0===c.upperBound?Infinity:c.upperBound,m=void 0===c.maxIterations?100:c.maxIterations;b&&(b.iterations=0,b.argmin=NaN,b.minimum=Infinity,b.converged=!1);if(isFinite(f)&&isFinite(d))l[0]=d,l[1]=f;else if(c=void 0===c.guess?-Infinity<d?Infinity>
f?.5*(d+f):d:Infinity>f?f:0:c.guess,k(l,a,c,h,d,f,m),isNaN(l[0])||isNaN(l[1]))return NaN;return g(a,l[0],l[1],e,m,b)}},{"./src/bracket-minimum":5,"./src/golden-section-minimize":6}],5:[function(a,f,c){f.exports=function(a,c,f,h,m,b,e){var g,d,k;e=1;var l=k=f;for(d=g=f=c(f);!r&&isFinite(h)&&!isNaN(h);){++e;var r=!0;g<=d&&(d=g,k=Math.max(m,k-h),g=c(k),r=!1);f<=d&&(d=f,l=Math.min(b,l+h),f=c(l),r=!1);d=Math.min(d,g,f);if(g===d&&k===m||f===d&&l===b)r=!0;h*=4>e?2:Math.exp(.5*e);if(!isFinite(h))return a[0]=
-Infinity,a[1]=Infinity,a}a[0]=k;a[1]=l;return a}},{}],6:[function(a,f,c){var g=2/(1+Math.sqrt(5));f.exports=function(a,c,f,m,b,e){for(var k=0,d=f-g*(f-c),h=c+g*(f-c),l=a(d),r=a(h),x=a(c),q=a(f),p=c,t=f;++k<b&&Math.abs(f-c)>m;)r>l?(f=h,h=d,r=l,d=f-g*(f-c),l=a(d)):(c=d,d=h,l=r,h=c+g*(f-c),r=a(h));a=.5*(f+c);c=.5*(l+r);e&&(e.iterations=k,e.argmin=a,e.minimum=c,e.converged=!0);return isNaN(r)||isNaN(l)||k===b?(e&&(e.converged=!1),NaN):x<c?p:q<c?t:a}},{}]},{},[1])(1)});
